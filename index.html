<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrinceCell - Stock Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        // GitHub Pages compatibility fix
        tailwind.config = {
            theme: {
                extend: {}
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 min-h-screen relative overflow-x-hidden">
    <!-- Animated Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse" style="animation-delay: 4s;"></div>
    </div>
    
    <!-- Navigation -->
    <nav class="bg-white/5 backdrop-blur-xl border-b border-white/10 shadow-2xl relative z-10">
        <div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-8">
            <div class="flex justify-between items-center h-16 sm:h-20">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center space-x-2 sm:space-x-3">
                        <div class="w-8 h-8 sm:w-12 sm:h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg sm:rounded-xl flex items-center justify-center shadow-lg">
                            <i class="fas fa-mobile-alt text-white text-sm sm:text-xl"></i>
                        </div>
                        <div>
                            <h1 class="text-lg sm:text-2xl lg:text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">PrinceCell</h1>
                            <p class="text-xs text-gray-300 hidden sm:block">Stock Management System</p>
                        </div>
                    </div>
                </div>
                <div class="flex items-center space-x-2 sm:space-x-4">
                    <div class="bg-white/10 backdrop-blur-md rounded-full px-2 sm:px-4 py-1 sm:py-2 border border-white/20">
                        <span id="currentUser" class="text-white font-medium text-xs sm:text-sm"></span>
                    </div>
                    <button onclick="logout()" class="bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-3 sm:px-6 py-1 sm:py-2 rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg text-xs sm:text-sm">
                        <i class="fas fa-sign-out-alt mr-1 sm:mr-2"></i><span class="hidden sm:inline">Logout</span><span class="sm:hidden">Exit</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Login Form -->
    <div id="loginForm" class="min-h-screen flex items-center justify-center p-2 sm:p-4 relative z-10">
        <div class="bg-white/5 backdrop-blur-2xl rounded-2xl sm:rounded-3xl shadow-2xl p-6 sm:p-10 w-full max-w-sm sm:max-w-lg border border-white/10 relative overflow-hidden">
            <!-- Decorative elements -->
            <div class="absolute top-0 right-0 w-20 h-20 sm:w-32 sm:h-32 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-full blur-2xl"></div>
            <div class="absolute bottom-0 left-0 w-16 h-16 sm:w-24 sm:h-24 bg-gradient-to-tr from-blue-500/20 to-purple-500/20 rounded-full blur-2xl"></div>
            
            <div class="text-center mb-6 sm:mb-10 relative z-10">
                <div class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl sm:rounded-2xl flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-xl">
                    <i class="fas fa-mobile-alt text-white text-lg sm:text-2xl"></i>
                </div>
                <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent mb-2">Welcome Back</h2>
                <p class="text-gray-300 text-sm sm:text-base">Masuk ke PrinceCell Stock Management</p>
            </div>
            <form onsubmit="login(event)" class="relative z-10">
                <div class="mb-4 sm:mb-6">
                    <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                        <i class="fas fa-user mr-2 text-purple-400"></i>Username
                    </label>
                    <select id="username" class="w-full px-3 sm:px-5 py-3 sm:py-4 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" required style="color-scheme: dark;">
                        <option value="" style="background-color: #1e1b4b; color: white;">Pilih User</option>
                        <option value="admin" style="background-color: #1e1b4b; color: white;">ðŸ‘‘ Admin</option>
                        <option value="user1" style="background-color: #1e1b4b; color: white;">ðŸ“± PrinceCell1</option>
                        <option value="user2" style="background-color: #1e1b4b; color: white;">ðŸ“± PrinceCell2</option>
                        <option value="user3" style="background-color: #1e1b4b; color: white;">ðŸ“± PrinceCell3</option>
                        <option value="user4" style="background-color: #1e1b4b; color: white;">ðŸ“± PrinceCell4</option>
                        <option value="user5" style="background-color: #1e1b4b; color: white;">ðŸ“± PrinceCell5</option>
                    </select>
                </div>
                <div class="mb-6 sm:mb-8">
                    <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                        <i class="fas fa-lock mr-2 text-purple-400"></i>Password
                    </label>
                    <input type="password" id="password" class="w-full px-3 sm:px-5 py-3 sm:py-4 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" placeholder="Masukkan password" required>
                </div>
                <button type="submit" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 sm:py-4 px-4 sm:px-6 rounded-xl sm:rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl text-sm sm:text-base">
                    <i class="fas fa-sign-in-alt mr-2"></i>Login to Dashboard
                </button>
            </form>
            <div class="mt-8 text-center relative z-10">
                <div class="bg-white/5 backdrop-blur-md rounded-2xl p-4 border border-white/10">
                    <p class="text-gray-300 text-sm mb-2 font-medium">ðŸ”‘ Demo Credentials:</p>
                    <div class="flex justify-center space-x-4 text-xs">
                        <span class="bg-purple-500/20 text-purple-300 px-3 py-1 rounded-full">Admin: admin123</span>
                        <span class="bg-blue-500/20 text-blue-300 px-3 py-1 rounded-full">Users: user123</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="hidden relative z-10">
        <div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8">
            <!-- Admin Panel -->
            <div id="adminPanel" class="hidden">
                <div class="mb-6 sm:mb-10">
                    <div class="bg-gradient-to-r from-purple-500/10 to-pink-500/10 backdrop-blur-xl rounded-2xl sm:rounded-3xl p-4 sm:p-8 border border-white/10 shadow-2xl">
                        <div class="flex items-center space-x-3 sm:space-x-4">
                            <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-xl">
                                <i class="fas fa-crown text-white text-lg sm:text-2xl"></i>
                            </div>
                            <div>
                                <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent mb-1 sm:mb-2">Admin Dashboard</h2>
                                <p class="text-gray-300 text-sm sm:text-base lg:text-lg">Kelola stock barang untuk semua user dengan kontrol penuh</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin Stock Management -->
                <div class="bg-white/5 backdrop-blur-2xl rounded-2xl sm:rounded-3xl p-4 sm:p-8 mb-6 sm:mb-10 border border-white/10 shadow-2xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-20 h-20 sm:w-32 sm:h-32 bg-gradient-to-br from-green-500/10 to-blue-500/10 rounded-full blur-2xl"></div>
                    <h3 class="text-lg sm:text-xl lg:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center relative z-10">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg">
                            <i class="fas fa-warehouse text-white text-sm sm:text-base"></i>
                        </div>
                        Kelola Stock Admin
                    </h3>
                    
                    <!-- Add Admin Stock Form -->
                    <form onsubmit="addAdminStock(event)" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 relative z-10 mb-6">
                        <div class="sm:col-span-2 lg:col-span-1">
                            <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                                <i class="fas fa-box mr-2 text-blue-400"></i>Nama Paket
                            </label>
                            <input type="text" id="adminStockName" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" placeholder="Contoh: Paket 30GB" required>
                        </div>
                        <div class="sm:col-span-1 lg:col-span-1">
                            <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                                <i class="fas fa-money-bill-wave mr-2 text-green-400"></i>Harga (Rp)
                            </label>
                            <input type="number" id="adminStockPrice" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" placeholder="120000" min="1000" required>
                        </div>
                        <div class="sm:col-span-1 lg:col-span-1">
                            <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                                <i class="fas fa-hashtag mr-2 text-yellow-400"></i>Jumlah
                            </label>
                            <input type="number" id="adminStockQuantity" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" placeholder="1000" min="1" required>
                        </div>
                        <div class="sm:col-span-2 lg:col-span-1 flex items-end">
                            <button type="submit" class="w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-bold py-2 sm:py-3 px-3 sm:px-4 rounded-xl sm:rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-xl text-sm sm:text-base">
                                <i class="fas fa-plus mr-1 sm:mr-2"></i><span class="hidden sm:inline">Tambah Stock</span><span class="sm:hidden">Tambah</span>
                            </button>
                        </div>
                    </form>

                    <!-- Distribute Stock Form -->
                    <div class="border-t border-white/10 pt-6">
                        <h4 class="text-md sm:text-lg font-bold text-white mb-4 flex items-center">
                            <div class="w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-orange-500 to-pink-500 rounded-lg flex items-center justify-center mr-2 shadow-lg">
                                <i class="fas fa-share-alt text-white text-xs sm:text-sm"></i>
                            </div>
                            Bagikan Stock ke PrinceCell
                        </h4>
                        <form onsubmit="distributeStock(event)" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6">
                            <div class="sm:col-span-1 lg:col-span-1">
                                <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                                    <i class="fas fa-box-open mr-2 text-purple-400"></i>Pilih Paket
                                </label>
                                <select id="distributePackage" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" required style="color-scheme: dark;">
                                    <option value="" style="background-color: #1e1b4b; color: white;">Pilih paket...</option>
                                </select>
                            </div>
                            <div class="sm:col-span-1 lg:col-span-1">
                                <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                                    <i class="fas fa-users mr-2 text-blue-400"></i>Ke User
                                </label>
                                <select id="distributeUser" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" required style="color-scheme: dark;">
                                    <option value="user1" style="background-color: #1e1b4b; color: white;">ðŸ“± PrinceCell1</option>
                                    <option value="user2" style="background-color: #1e1b4b; color: white;">ðŸ“± PrinceCell2</option>
                                    <option value="user3" style="background-color: #1e1b4b; color: white;">ðŸ“± PrinceCell3</option>
                                    <option value="user4" style="background-color: #1e1b4b; color: white;">ðŸ“± PrinceCell4</option>
                                    <option value="user5" style="background-color: #1e1b4b; color: white;">ðŸ“± PrinceCell5</option>
                                </select>
                            </div>
                            <div class="sm:col-span-1 lg:col-span-1">
                                <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                                    <i class="fas fa-calculator mr-2 text-yellow-400"></i>Jumlah
                                </label>
                                <input type="number" id="distributeQuantity" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" placeholder="50" min="1" required>
                            </div>
                            <div class="sm:col-span-2 lg:col-span-1 flex items-end">
                                <button type="submit" class="w-full bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white font-bold py-2 sm:py-3 px-3 sm:px-4 rounded-xl sm:rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-xl text-sm sm:text-base">
                                    <i class="fas fa-share-alt mr-1 sm:mr-2"></i><span class="hidden sm:inline">Bagikan</span><span class="sm:hidden">Bagikan</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Admin Stock Table -->
                <div class="bg-white/5 backdrop-blur-2xl rounded-2xl sm:rounded-3xl p-4 sm:p-8 mb-6 sm:mb-10 border border-white/10 shadow-2xl relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-24 h-24 sm:w-40 sm:h-40 bg-gradient-to-br from-purple-500/10 to-blue-500/10 rounded-full blur-2xl"></div>
                    <h3 class="text-lg sm:text-xl lg:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center relative z-10">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg">
                            <i class="fas fa-warehouse text-white text-sm sm:text-base"></i>
                        </div>
                        Stock Admin (Pusat)
                    </h3>
                    <div class="overflow-x-auto relative z-10">
                        <table class="w-full text-white min-w-[800px]">
                            <thead>
                                <tr class="border-b border-white/20">
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-blue-300 text-xs sm:text-sm">
                                        <i class="fas fa-box mr-1 sm:mr-2"></i>Nama Paket
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-green-300 text-xs sm:text-sm">
                                        <i class="fas fa-money-bill-wave mr-1 sm:mr-2"></i>Harga
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-yellow-300 text-xs sm:text-sm">
                                        <i class="fas fa-warehouse mr-1 sm:mr-2"></i>Stock Awal
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-orange-300 text-xs sm:text-sm">
                                        <i class="fas fa-share-alt mr-1 sm:mr-2"></i>Terdistribusi
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-red-300 text-xs sm:text-sm">
                                        <i class="fas fa-layer-group mr-1 sm:mr-2"></i>Sisa
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-gray-300 text-xs sm:text-sm">
                                        <i class="fas fa-cogs mr-1 sm:mr-2"></i>Aksi
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="adminStockTable">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Sales Report Table -->
                <div class="bg-white/5 backdrop-blur-2xl rounded-2xl sm:rounded-3xl p-4 sm:p-8 border border-white/10 shadow-2xl relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-24 h-24 sm:w-40 sm:h-40 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-2xl"></div>
                    <h3 class="text-lg sm:text-xl lg:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center relative z-10">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg">
                            <i class="fas fa-chart-bar text-white text-sm sm:text-base"></i>
                        </div>
                        Laporan Penjualan PrinceCell
                    </h3>
                    <div class="overflow-x-auto relative z-10">
                        <table class="w-full text-white min-w-[900px]">
                            <thead>
                                <tr class="border-b border-white/20">
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-purple-300 text-xs sm:text-sm">
                                        <i class="fas fa-user mr-1 sm:mr-2"></i>User
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-blue-300 text-xs sm:text-sm">
                                        <i class="fas fa-box mr-1 sm:mr-2"></i>Nama Paket
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-green-300 text-xs sm:text-sm">
                                        <i class="fas fa-money-bill-wave mr-1 sm:mr-2"></i>Harga
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-yellow-300 text-xs sm:text-sm">
                                        <i class="fas fa-warehouse mr-1 sm:mr-2"></i>Stock Awal
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-orange-300 text-xs sm:text-sm">
                                        <i class="fas fa-shopping-cart mr-1 sm:mr-2"></i>Terjual
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-red-300 text-xs sm:text-sm">
                                        <i class="fas fa-layer-group mr-1 sm:mr-2"></i>Sisa
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-pink-300 text-xs sm:text-sm">
                                        <i class="fas fa-chart-line mr-1 sm:mr-2"></i>Total Penjualan
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-cyan-300 text-xs sm:text-sm">
                                        <i class="fas fa-tags mr-1 sm:mr-2"></i>Sumber
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-gray-300 text-xs sm:text-sm">
                                        <i class="fas fa-cogs mr-1 sm:mr-2"></i>Aksi
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="allStockTable">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- User Panel -->
            <div id="userPanel" class="hidden">
                <div class="mb-6 sm:mb-10">
                    <div class="bg-gradient-to-r from-blue-500/10 to-purple-500/10 backdrop-blur-xl rounded-2xl sm:rounded-3xl p-4 sm:p-8 border border-white/10 shadow-2xl">
                        <div class="flex items-center space-x-3 sm:space-x-4">
                            <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-xl">
                                <i class="fas fa-user-circle text-white text-lg sm:text-2xl"></i>
                            </div>
                            <div>
                                <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-1 sm:mb-2">User Dashboard</h2>
                                <p class="text-gray-300 text-sm sm:text-base lg:text-lg">Kelola stock barang dan penjualan Anda dengan mudah</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add Stock Form for User -->
                <div class="bg-white/5 backdrop-blur-2xl rounded-2xl sm:rounded-3xl p-4 sm:p-8 mb-6 sm:mb-10 border border-white/10 shadow-2xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-20 h-20 sm:w-32 sm:h-32 bg-gradient-to-br from-green-500/10 to-blue-500/10 rounded-full blur-2xl"></div>
                    <h3 class="text-lg sm:text-xl lg:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center relative z-10">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg">
                            <i class="fas fa-plus text-white text-sm sm:text-base"></i>
                        </div>
                        Tambah Stock Barang
                    </h3>
                    <form onsubmit="addUserStock(event)" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 relative z-10">
                        <div class="sm:col-span-2 lg:col-span-1">
                            <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                                <i class="fas fa-box mr-2 text-blue-400"></i>Nama Paket
                            </label>
                            <input type="text" id="userStockName" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" placeholder="Contoh: Paket 5GB" required>
                        </div>
                        <div class="sm:col-span-1 lg:col-span-1">
                            <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                                <i class="fas fa-money-bill-wave mr-2 text-green-400"></i>Harga (Rp)
                            </label>
                            <input type="number" id="userStockPrice" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" placeholder="25000" min="1000" required>
                        </div>
                        <div class="sm:col-span-1 lg:col-span-1">
                            <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                                <i class="fas fa-hashtag mr-2 text-yellow-400"></i>Jumlah
                            </label>
                            <input type="number" id="userStockQuantity" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" placeholder="50" min="1" required>
                        </div>
                        <div class="sm:col-span-2 lg:col-span-1 flex items-end">
                            <button type="submit" class="w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-bold py-2 sm:py-3 px-3 sm:px-4 rounded-xl sm:rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-xl text-sm sm:text-base">
                                <i class="fas fa-plus mr-1 sm:mr-2"></i><span class="hidden sm:inline">Tambah Stock</span><span class="sm:hidden">Tambah</span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Sales Form -->
                <div class="bg-white/5 backdrop-blur-2xl rounded-2xl sm:rounded-3xl p-4 sm:p-8 mb-6 sm:mb-10 border border-white/10 shadow-2xl relative overflow-hidden">
                    <div class="absolute bottom-0 left-0 w-20 h-20 sm:w-32 sm:h-32 bg-gradient-to-tr from-orange-500/10 to-pink-500/10 rounded-full blur-2xl"></div>
                    <h3 class="text-lg sm:text-xl lg:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center relative z-10">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-orange-500 to-pink-500 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg">
                            <i class="fas fa-shopping-cart text-white text-sm sm:text-base"></i>
                        </div>
                        Catat Penjualan
                    </h3>
                    <form onsubmit="recordSale(event)" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6 relative z-10">
                        <div class="sm:col-span-2 lg:col-span-1">
                            <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                                <i class="fas fa-box-open mr-2 text-purple-400"></i>Pilih Paket
                            </label>
                            <select id="salePackage" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" required style="color-scheme: dark;">
                                <option value="" style="background-color: #1e1b4b; color: white;">Pilih paket...</option>
                            </select>
                        </div>
                        <div class="sm:col-span-1 lg:col-span-1">
                            <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                                <i class="fas fa-calculator mr-2 text-yellow-400"></i>Jumlah Terjual
                            </label>
                            <input type="number" id="saleQuantity" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" placeholder="1" min="1" required>
                        </div>
                        <div class="sm:col-span-2 lg:col-span-1 flex items-end">
                            <button type="submit" class="w-full bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white font-bold py-2 sm:py-3 px-3 sm:px-4 rounded-xl sm:rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-xl text-sm sm:text-base">
                                <i class="fas fa-shopping-cart mr-1 sm:mr-2"></i><span class="hidden sm:inline">Catat Penjualan</span><span class="sm:hidden">Catat</span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- User Stock Table -->
                <div class="bg-white/5 backdrop-blur-2xl rounded-2xl sm:rounded-3xl p-4 sm:p-8 border border-white/10 shadow-2xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-24 h-24 sm:w-40 sm:h-40 bg-gradient-to-bl from-purple-500/10 to-blue-500/10 rounded-full blur-2xl"></div>
                    <h3 class="text-lg sm:text-xl lg:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center relative z-10">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg">
                            <i class="fas fa-boxes text-white text-sm sm:text-base"></i>
                        </div>
                        Stock Barang Saya
                    </h3>
                    <div class="overflow-x-auto relative z-10">
                        <table class="w-full text-white min-w-[800px]">
                            <thead>
                                <tr class="border-b border-white/20">
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-blue-300 text-xs sm:text-sm">
                                        <i class="fas fa-box mr-1 sm:mr-2"></i>Nama Paket
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-green-300 text-xs sm:text-sm">
                                        <i class="fas fa-money-bill-wave mr-1 sm:mr-2"></i>Harga
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-yellow-300 text-xs sm:text-sm">
                                        <i class="fas fa-warehouse mr-1 sm:mr-2"></i>Stock Awal
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-orange-300 text-xs sm:text-sm">
                                        <i class="fas fa-shopping-cart mr-1 sm:mr-2"></i>Terjual
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-red-300 text-xs sm:text-sm">
                                        <i class="fas fa-layer-group mr-1 sm:mr-2"></i>Sisa Stock
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-pink-300 text-xs sm:text-sm">
                                        <i class="fas fa-chart-line mr-1 sm:mr-2"></i>Total Penjualan
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-purple-300 text-xs sm:text-sm">
                                        <i class="fas fa-signal mr-1 sm:mr-2"></i>Status
                                    </th>
                                    <th class="text-left py-2 sm:py-4 px-2 sm:px-6 font-bold text-gray-300 text-xs sm:text-sm">
                                        <i class="fas fa-cogs mr-1 sm:mr-2"></i>Aksi
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="userStockTable">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-lg flex items-center justify-center p-2 sm:p-4 z-50">
        <div class="bg-white/5 backdrop-blur-2xl rounded-2xl sm:rounded-3xl p-4 sm:p-8 w-full max-w-sm sm:max-w-lg border border-white/10 shadow-2xl relative overflow-hidden">
            <div class="absolute top-0 right-0 w-20 h-20 sm:w-32 sm:h-32 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-full blur-2xl"></div>
            <div class="absolute bottom-0 left-0 w-16 h-16 sm:w-24 sm:h-24 bg-gradient-to-tr from-purple-500/20 to-pink-500/20 rounded-full blur-2xl"></div>
            
            <h3 class="text-lg sm:text-xl lg:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center relative z-10">
                <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg">
                    <i class="fas fa-edit text-white text-sm sm:text-base"></i>
                </div>
                Edit Stock Barang
            </h3>
            <form onsubmit="updateStock(event)" class="relative z-10">
                <input type="hidden" id="editId">
                <div class="mb-4 sm:mb-6">
                    <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                        <i class="fas fa-box mr-2 text-blue-400"></i>Nama Paket
                    </label>
                    <input type="text" id="editName" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" required>
                </div>
                <div class="mb-4 sm:mb-6">
                    <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                        <i class="fas fa-money-bill-wave mr-2 text-green-400"></i>Harga (Rp)
                    </label>
                    <input type="number" id="editPrice" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" min="1000" required>
                </div>
                <div class="mb-4 sm:mb-6">
                    <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                        <i class="fas fa-hashtag mr-2 text-yellow-400"></i>Stock Awal
                    </label>
                    <input type="number" id="editQuantity" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" min="0" required>
                </div>
                <div class="mb-6 sm:mb-8">
                    <label class="block text-white text-xs sm:text-sm font-medium mb-2 sm:mb-3 flex items-center">
                        <i class="fas fa-shopping-cart mr-2 text-orange-400"></i>Sudah Terjual
                    </label>
                    <input type="number" id="editSold" class="w-full px-3 sm:px-4 py-2 sm:py-3 bg-white/5 border border-white/10 rounded-xl sm:rounded-2xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent backdrop-blur-md transition-all duration-300 text-sm sm:text-base" min="0" required>
                </div>
                <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4">
                    <button type="button" onclick="closeEditModal()" class="flex-1 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-bold py-2 sm:py-3 px-3 sm:px-4 rounded-xl sm:rounded-2xl transition-all duration-300 transform hover:scale-105 text-sm sm:text-base">
                        <i class="fas fa-times mr-1 sm:mr-2"></i>Batal
                    </button>
                    <button type="submit" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-bold py-2 sm:py-3 px-3 sm:px-4 rounded-xl sm:rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-xl text-sm sm:text-base">
                        <i class="fas fa-save mr-1 sm:mr-2"></i>Update
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Database simulation using localStorage
        let currentUser = null;
        let stockData = JSON.parse(localStorage.getItem('princecell_stock') || '{}');

        // Initialize default data if empty
        if (Object.keys(stockData).length === 0) {
            stockData = {
                admin: [
                    { id: 9001, name: "Paket Data 5GB", price: 25000, quantity: 500, sold: 0, remaining: 500, distributed: 150 },
                    { id: 9002, name: "Paket Data 10GB", price: 45000, quantity: 300, sold: 0, remaining: 300, distributed: 80 },
                    { id: 9003, name: "Paket Data 15GB", price: 65000, quantity: 200, sold: 0, remaining: 200, distributed: 60 },
                    { id: 9004, name: "Paket Data 20GB", price: 85000, quantity: 150, sold: 0, remaining: 150, distributed: 75 },
                    { id: 9005, name: "Paket Telpon 100 Menit", price: 15000, quantity: 400, sold: 0, remaining: 400, distributed: 120 },
                    { id: 9006, name: "Paket SMS 500", price: 10000, quantity: 600, sold: 0, remaining: 600, distributed: 180 }
                ],
                user1: [
                    { id: 1001, name: "Paket Data 5GB", price: 25000, quantity: 50, sold: 15, remaining: 35, fromAdmin: true },
                    { id: 1002, name: "Paket Telpon 100 Menit", price: 15000, quantity: 30, sold: 8, remaining: 22, fromAdmin: true }
                ],
                user2: [
                    { id: 2001, name: "Paket Data 10GB", price: 45000, quantity: 40, sold: 12, remaining: 28, fromAdmin: true },
                    { id: 2002, name: "Paket SMS 500", price: 10000, quantity: 60, sold: 25, remaining: 35, fromAdmin: true }
                ],
                user3: [
                    { id: 3001, name: "Paket Data 15GB", price: 65000, quantity: 35, sold: 10, remaining: 25, fromAdmin: true },
                    { id: 3002, name: "Paket Data 20GB", price: 85000, quantity: 25, sold: 5, remaining: 20, fromAdmin: true }
                ],
                user4: [
                    { id: 4001, name: "Paket Data 20GB", price: 85000, quantity: 30, sold: 18, remaining: 12, fromAdmin: true },
                    { id: 4002, name: "Paket Data 5GB", price: 25000, quantity: 45, sold: 20, remaining: 25, fromAdmin: true }
                ],
                user5: [
                    { id: 5001, name: "Paket Data 15GB", price: 65000, quantity: 20, sold: 8, remaining: 12, fromAdmin: true },
                    { id: 5002, name: "Paket SMS 500", price: 10000, quantity: 15, sold: 3, remaining: 12, fromAdmin: true }
                ]
            };
            saveData();
        }

        function saveData() {
            localStorage.setItem('princecell_stock', JSON.stringify(stockData));
        }

        function login(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Simple authentication
            const validCredentials = {
                'admin': 'admin123',
                'user1': 'user123',
                'user2': 'user123',
                'user3': 'user123',
                'user4': 'user123',
                'user5': 'user123'
            };

            if (validCredentials[username] === password) {
                currentUser = username;
                document.getElementById('currentUser').textContent = username === 'admin' ? 'Admin' : username.replace('user', 'PrinceCell').toUpperCase();
                document.getElementById('loginForm').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');

                if (username === 'admin') {
                    document.getElementById('adminPanel').classList.remove('hidden');
                    loadAdminStock();
                    loadAllStock();
                    updateDistributeOptions();
                } else {
                    document.getElementById('userPanel').classList.remove('hidden');
                    loadUserStock();
                    updateSaleOptions();
                }
            } else {
                alert('Username atau password salah!');
            }
        }

        function logout() {
            currentUser = null;
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('userPanel').classList.add('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        function addAdminStock(event) {
            event.preventDefault();
            const name = document.getElementById('adminStockName').value;
            const price = parseInt(document.getElementById('adminStockPrice').value);
            const quantity = parseInt(document.getElementById('adminStockQuantity').value);

            const newStock = {
                id: Date.now(),
                name: name,
                price: price,
                quantity: quantity,
                sold: 0,
                remaining: quantity,
                distributed: 0
            };

            if (!stockData.admin) {
                stockData.admin = [];
            }

            stockData.admin.push(newStock);
            saveData();
            loadAdminStock();
            updateDistributeOptions();

            // Reset form
            document.getElementById('adminStockName').value = '';
            document.getElementById('adminStockPrice').value = '';
            document.getElementById('adminStockQuantity').value = '';

            showNotification('Stock admin berhasil ditambahkan!', 'success');
        }

        function distributeStock(event) {
            event.preventDefault();
            const packageId = parseInt(document.getElementById('distributePackage').value);
            const user = document.getElementById('distributeUser').value;
            const quantity = parseInt(document.getElementById('distributeQuantity').value);

            const adminItem = stockData.admin.find(item => item.id === packageId);
            
            if (adminItem && (adminItem.remaining - adminItem.distributed) >= quantity) {
                // Update admin stock
                adminItem.distributed += quantity;

                // Add to user stock
                if (!stockData[user]) {
                    stockData[user] = [];
                }

                // Check if user already has this package
                const existingItem = stockData[user].find(item => item.name === adminItem.name && item.fromAdmin);
                
                if (existingItem) {
                    existingItem.quantity += quantity;
                    existingItem.remaining += quantity;
                } else {
                    const newUserStock = {
                        id: Date.now(),
                        name: adminItem.name,
                        price: adminItem.price,
                        quantity: quantity,
                        sold: 0,
                        remaining: quantity,
                        fromAdmin: true
                    };
                    stockData[user].push(newUserStock);
                }

                saveData();
                loadAdminStock();
                loadAllStock();
                updateDistributeOptions();

                // Reset form
                document.getElementById('distributePackage').value = '';
                document.getElementById('distributeQuantity').value = '';

                showNotification(`${quantity} ${adminItem.name} berhasil dibagikan ke ${user.replace('user', 'PrinceCell').toUpperCase()}!`, 'success');
            } else {
                alert('Stock admin tidak mencukupi!');
            }
        }

        function addUserStock(event) {
            event.preventDefault();
            const name = document.getElementById('userStockName').value;
            const price = parseInt(document.getElementById('userStockPrice').value);
            const quantity = parseInt(document.getElementById('userStockQuantity').value);

            const newStock = {
                id: Date.now(),
                name: name,
                price: price,
                quantity: quantity,
                sold: 0,
                remaining: quantity
            };

            if (!stockData[currentUser]) {
                stockData[currentUser] = [];
            }

            stockData[currentUser].push(newStock);
            saveData();
            loadUserStock();
            updateSaleOptions();

            // Reset form
            document.getElementById('userStockName').value = '';
            document.getElementById('userStockPrice').value = '';
            document.getElementById('userStockQuantity').value = '';

            showNotification('Stock berhasil ditambahkan!', 'success');
        }

        function recordSale(event) {
            event.preventDefault();
            const packageId = parseInt(document.getElementById('salePackage').value);
            const saleQuantity = parseInt(document.getElementById('saleQuantity').value);

            const stockItem = stockData[currentUser].find(item => item.id === packageId);
            
            if (stockItem && stockItem.remaining >= saleQuantity) {
                stockItem.sold += saleQuantity;
                stockItem.remaining -= saleQuantity;
                saveData();
                loadUserStock();
                updateSaleOptions();

                // Reset form
                document.getElementById('salePackage').value = '';
                document.getElementById('saleQuantity').value = '';

                showNotification(`Penjualan ${saleQuantity} ${stockItem.name} berhasil dicatat!`, 'success');
            } else {
                alert('Stock tidak mencukupi!');
            }
        }

        function loadAdminStock() {
            const tbody = document.getElementById('adminStockTable');
            tbody.innerHTML = '';

            if (stockData.admin) {
                stockData.admin.forEach(item => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-white/10 hover:bg-white/5 transition-all duration-300';
                    
                    const availableStock = item.remaining - item.distributed;
                    const statusClass = availableStock === 0 ? 'bg-red-500' : availableStock < 50 ? 'bg-yellow-500' : 'bg-green-500';
                    
                    row.innerHTML = `
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-white font-bold text-xs sm:text-sm">${item.name}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-green-400 font-bold text-xs sm:text-sm">Rp ${(item.price || 0).toLocaleString('id-ID')}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-yellow-300 font-medium text-xs sm:text-sm">${item.quantity}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-orange-300 font-medium text-xs sm:text-sm">${item.distributed}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6">
                            <span class="${statusClass} text-white px-2 sm:px-3 py-1 sm:py-2 rounded-full text-xs font-bold shadow-lg">
                                ${availableStock}
                            </span>
                        </td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6">
                            <button onclick="editStock(${item.id}, 'admin')" class="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-2 sm:px-3 py-1 sm:py-2 rounded-lg sm:rounded-xl text-xs font-medium transition-all duration-300 transform hover:scale-105 shadow-lg">
                                <i class="fas fa-edit"></i>
                            </button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }
        }

        function loadAllStock() {
            const tbody = document.getElementById('allStockTable');
            tbody.innerHTML = '';

            Object.keys(stockData).forEach(user => {
                if (user === 'admin') return; // Skip admin stock in sales report
                
                stockData[user].forEach(item => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-white/10 hover:bg-white/5 transition-all duration-300';
                    
                    const statusClass = item.remaining === 0 ? 'bg-red-500' : item.remaining < 10 ? 'bg-yellow-500' : 'bg-green-500';
                    const totalSales = (item.price || 0) * item.sold;
                    const sourceText = item.fromAdmin ? 'Dari Admin' : 'Pribadi';
                    const sourceClass = item.fromAdmin ? 'bg-blue-500/20 text-blue-300' : 'bg-green-500/20 text-green-300';
                    
                    row.innerHTML = `
                        <td class="py-2 sm:py-4 px-2 sm:px-6 font-bold text-purple-200 text-xs sm:text-sm">${user.replace('user', 'PrinceCell').toUpperCase()}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-white font-medium text-xs sm:text-sm">${item.name}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-green-400 font-bold text-xs sm:text-sm">Rp ${(item.price || 0).toLocaleString('id-ID')}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-yellow-300 font-medium text-xs sm:text-sm">${item.quantity}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-orange-300 font-medium text-xs sm:text-sm">${item.sold}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6">
                            <span class="${statusClass} text-white px-2 sm:px-3 py-1 sm:py-2 rounded-full text-xs font-bold shadow-lg">
                                ${item.remaining}
                            </span>
                        </td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-pink-400 font-bold text-xs sm:text-sm">Rp ${totalSales.toLocaleString('id-ID')}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6">
                            <span class="${sourceClass} px-2 sm:px-3 py-1 sm:py-2 rounded-full text-xs font-bold">
                                ${sourceText}
                            </span>
                        </td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6">
                            <div class="flex flex-col sm:flex-row gap-1 sm:gap-2">
                                <button onclick="editStock(${item.id}, '${user}')" class="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-2 sm:px-3 py-1 sm:py-2 rounded-lg sm:rounded-xl text-xs font-medium transition-all duration-300 transform hover:scale-105 shadow-lg">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="deleteStock(${item.id}, '${user}')" class="bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-2 sm:px-3 py-1 sm:py-2 rounded-lg sm:rounded-xl text-xs font-medium transition-all duration-300 transform hover:scale-105 shadow-lg">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            });
        }

        function loadUserStock() {
            const tbody = document.getElementById('userStockTable');
            tbody.innerHTML = '';

            if (stockData[currentUser]) {
                stockData[currentUser].forEach(item => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-white/10 hover:bg-white/5 transition-all duration-300';
                    
                    const statusText = item.remaining === 0 ? 'Habis' : item.remaining < 10 ? 'Menipis' : 'Tersedia';
                    const statusClass = item.remaining === 0 ? 'bg-red-500' : item.remaining < 10 ? 'bg-yellow-500' : 'bg-green-500';
                    const totalSales = (item.price || 0) * item.sold;
                    
                    row.innerHTML = `
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-white font-bold text-xs sm:text-sm">${item.name}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-green-400 font-bold text-xs sm:text-sm">Rp ${(item.price || 0).toLocaleString('id-ID')}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-yellow-300 font-medium text-xs sm:text-sm">${item.quantity}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-orange-300 font-medium text-xs sm:text-sm">${item.sold}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 font-bold text-lg sm:text-xl text-red-300">${item.remaining}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6 text-pink-400 font-bold text-xs sm:text-sm">Rp ${totalSales.toLocaleString('id-ID')}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6">
                            <span class="${statusClass} text-white px-2 sm:px-3 py-1 sm:py-2 rounded-full text-xs font-bold shadow-lg">
                                ${statusText}
                            </span>
                        </td>
                        <td class="py-2 sm:py-4 px-2 sm:px-6">
                            <button onclick="editStock(${item.id}, '${currentUser}')" class="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-2 sm:px-3 py-1 sm:py-2 rounded-lg sm:rounded-xl text-xs font-medium transition-all duration-300 transform hover:scale-105 shadow-lg">
                                <i class="fas fa-edit"></i>
                            </button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }
        }

        function updateSaleOptions() {
            const select = document.getElementById('salePackage');
            select.innerHTML = '<option value="" style="background-color: #1e1b4b; color: white;">Pilih paket...</option>';

            if (stockData[currentUser]) {
                stockData[currentUser].forEach(item => {
                    if (item.remaining > 0) {
                        const option = document.createElement('option');
                        option.value = item.id;
                        option.textContent = `${item.name} - Rp ${(item.price || 0).toLocaleString('id-ID')} (Sisa: ${item.remaining})`;
                        option.style.backgroundColor = '#1e1b4b';
                        option.style.color = 'white';
                        select.appendChild(option);
                    }
                });
            }
        }

        function updateDistributeOptions() {
            const select = document.getElementById('distributePackage');
            select.innerHTML = '<option value="" style="background-color: #1e1b4b; color: white;">Pilih paket...</option>';

            if (stockData.admin) {
                stockData.admin.forEach(item => {
                    const availableStock = item.remaining - item.distributed;
                    if (availableStock > 0) {
                        const option = document.createElement('option');
                        option.value = item.id;
                        option.textContent = `${item.name} - Rp ${(item.price || 0).toLocaleString('id-ID')} (Tersedia: ${availableStock})`;
                        option.style.backgroundColor = '#1e1b4b';
                        option.style.color = 'white';
                        select.appendChild(option);
                    }
                });
            }
        }

        function editStock(id, user) {
            const item = stockData[user].find(item => item.id === id);
            if (item) {
                document.getElementById('editId').value = `${id}-${user}`;
                document.getElementById('editName').value = item.name;
                document.getElementById('editPrice').value = item.price || 0;
                document.getElementById('editQuantity').value = item.quantity;
                
                // For admin stock, show distributed instead of sold
                if (user === 'admin') {
                    document.getElementById('editSold').value = item.distributed || 0;
                    document.querySelector('label[for="editSold"] i').className = 'fas fa-share-alt mr-2 text-orange-400';
                    document.querySelector('label[for="editSold"]').innerHTML = '<i class="fas fa-share-alt mr-2 text-orange-400"></i>Terdistribusi';
                } else {
                    document.getElementById('editSold').value = item.sold || 0;
                    document.querySelector('label[for="editSold"] i').className = 'fas fa-shopping-cart mr-2 text-orange-400';
                    document.querySelector('label[for="editSold"]').innerHTML = '<i class="fas fa-shopping-cart mr-2 text-orange-400"></i>Sudah Terjual';
                }
                
                document.getElementById('editModal').classList.remove('hidden');
            }
        }

        function updateStock(event) {
            event.preventDefault();
            const [id, user] = document.getElementById('editId').value.split('-');
            const name = document.getElementById('editName').value;
            const price = parseInt(document.getElementById('editPrice').value);
            const quantity = parseInt(document.getElementById('editQuantity').value);
            const sold = parseInt(document.getElementById('editSold').value);

            const item = stockData[user].find(item => item.id === parseInt(id));
            if (item) {
                // Validasi: sold tidak boleh lebih dari quantity
                if (sold > quantity) {
                    alert('Jumlah terjual tidak boleh lebih dari stock awal!');
                    return;
                }
                
                // Update semua data item
                item.name = name;
                item.price = price;
                item.quantity = quantity;
                
                if (user === 'admin') {
                    // For admin stock, sold field represents distributed
                    item.distributed = sold;
                    item.remaining = quantity;
                } else {
                    // For user stock, normal sold logic
                    item.sold = sold;
                    item.remaining = quantity - sold;
                }

                saveData();
                
                // Refresh tampilan sesuai role user
                if (currentUser === 'admin') {
                    loadAdminStock();
                    loadAllStock();
                    updateDistributeOptions();
                } else {
                    loadUserStock();
                    updateSaleOptions();
                }
                
                closeEditModal();
                showNotification('Stock berhasil diupdate!', 'success');
            }
        }

        function deleteStock(id, user) {
            if (confirm('Yakin ingin menghapus stock ini?')) {
                stockData[user] = stockData[user].filter(item => item.id !== id);
                saveData();
                loadAllStock();
                showNotification('Stock berhasil dihapus!', 'success');
            }
        }

        function closeEditModal() {
            document.getElementById('editModal').classList.add('hidden');
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg text-white font-medium transform transition-all duration-300 ${
                type === 'success' ? 'bg-green-500' : 'bg-red-500'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Close modal when clicking outside
        document.getElementById('editModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeEditModal();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'969a81a334aefd1a',t:'MTc1NDI3MzMwMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
